# –û—Ç—á—ë—Ç: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø—Ä—è–º–æ–π –≤—ã–±–æ—Ä —Ä–æ–¥–∏—Ç–µ–ª–µ–π

**–î–∞—Ç–∞:** 2025-11-08
**–ê–≤—Ç–æ—Ä:** Claude Code
**–ö–æ–º–º–∏—Ç:** `1787362`
**–í–µ—Ç–∫–∞:** main

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ](#–∫—Ä–∞—Ç–∫–æ–µ-—Ä–µ–∑—é–º–µ)
2. [–ü—Ä–æ–±–ª–µ–º–∞](#–ø—Ä–æ–±–ª–µ–º–∞)
3. [–†–µ—à–µ–Ω–∏–µ](#—Ä–µ—à–µ–Ω–∏–µ)
4. [–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö](#–∏–∑–º–µ–Ω–µ–Ω–∏—è-–≤-–±–∞–∑–µ-–¥–∞–Ω–Ω—ã—Ö)
5. [–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ](#–∏–∑–º–µ–Ω–µ–Ω–∏—è-–≤-–∫–æ–¥–µ)
6. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
7. [–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞](#–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞)
8. [–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å](#–æ–±—Ä–∞—Ç–Ω–∞—è-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
9. [–ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è](#–±—É–¥—É—â–∏–µ-—É–ª—É—á—à–µ–Ω–∏—è)
10. [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é](#–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è-–ø–æ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)

---

## –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

–ó–∞–º–µ–Ω–∏–ª–∏ –≤—ã–±–æ—Ä –ø–æ–º—ë—Ç–∞ (litter) –Ω–∞ **–ø—Ä—è–º–æ–π –≤—ã–±–æ—Ä —Ä–æ–¥–∏—Ç–µ–ª–µ–π** (sire/dam) –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å–æ–∑–¥–∞–Ω–∏—è —â–µ–Ω–∫–∞. –¢–µ–ø–µ—Ä—å –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ dropdown "Litter" –µ—Å—Ç—å –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö dropdown:
- **Sire / Father** (–æ—Ç–µ—Ü) - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∞–º—Ü–æ–≤
- **Dam / Mother** (–º–∞—Ç—å) - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∞–º–æ–∫

–≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∏ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –¥–ª—è –±—É–¥—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Ä–æ–¥–∏—Ç–µ–ª–µ–π.

---

## –ü—Ä–æ–±–ª–µ–º–∞

### –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (—á–µ—Ä–µ–∑ litter):

```
–©–µ–Ω–æ–∫ ‚Üí Litter ‚Üí –†–æ–¥–∏—Ç–µ–ª–∏ (Sire/Dam)
```

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
1. ‚ùå –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å litter –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–º—ë—Ç–∞
2. ‚ùå –°–ª–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π –±–µ–∑ –ø–æ–º—ë—Ç–∞
3. ‚ùå –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —â–µ–Ω–∫–∞
4. ‚ùå –õ–∏—à–Ω—è—è —Ç–∞–±–ª–∏—Ü–∞-–ø–æ—Å—Ä–µ–¥–Ω–∏–∫ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**
- –©–µ–Ω–æ–∫ "Plusha" —Å–æ–∑–¥–∞–Ω –±–µ–∑ litter ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Sire: TBD", "Dam: TBD", "Litter: Private"
- –©–µ–Ω–æ–∫ "Regal" —Å–æ–∑–¥–∞–Ω —Å litter "Royal Heritage" ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Sire: Sir Winston", "Dam: Lady Clementine", "Litter: Royal Heritage Litter"

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –≤—Ä—É—á–Ω—É—é –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å UUID –ø–æ–º—ë—Ç–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π litter –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª—É—á–∞—è.

---

## –†–µ—à–µ–Ω–∏–µ

### –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (–ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏):

```
–©–µ–Ω–æ–∫ ‚Üí –†–æ–¥–∏—Ç–µ–ª–∏ (Sire/Dam)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
1. ‚úÖ –ü—Ä—è–º–æ–π –≤—ã–±–æ—Ä —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏–∑ dropdown
2. ‚úÖ –ù–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å litter
3. ‚úÖ –†–æ–¥–∏—Ç–µ–ª–∏ —É–∂–µ –∏–º–µ—é—Ç –ø–æ–ª–µ `photo_urls[]` - –≥–æ—Ç–æ–≤–æ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
4. ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ–ª—É: Sire = male, Dam = female
5. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Ä–æ–¥—É —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º: "Sir Winston (English Bulldog)"

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `sire_id` –∏ `dam_id` –≤ —Ç–∞–±–ª–∏—Ü—É `puppies`
- –ü—Ä—è–º—ã–µ foreign key —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É `parents`
- Backward compatibility: —Å—Ç–∞—Ä—ã–µ —â–µ–Ω–∫–∏ —Å `litter_id` –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

---

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏—è: `20250811T120000Z_add_parent_fields_to_puppies.sql`

```sql
-- –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ–π
ALTER TABLE puppies
  ADD COLUMN sire_id UUID REFERENCES parents(id) ON DELETE SET NULL,
  ADD COLUMN dam_id UUID REFERENCES parents(id) ON DELETE SET NULL;

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
CREATE INDEX idx_puppies_sire_id ON puppies(sire_id);
CREATE INDEX idx_puppies_dam_id ON puppies(dam_id);

-- –ú–∏–≥—Ä–∏—Ä—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ litters
UPDATE puppies p
SET
  sire_id = l.sire_id,
  dam_id = l.dam_id
FROM litters l
WHERE p.litter_id = l.id AND p.litter_id IS NOT NULL;

-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
COMMENT ON COLUMN puppies.sire_id IS 'Direct reference to male parent (father)';
COMMENT ON COLUMN puppies.dam_id IS 'Direct reference to female parent (mother)';
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —á–µ—Ä–µ–∑ Supabase MCP

### –°—Ö–µ–º–∞ –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```
puppies:
  - id (UUID)
  - litter_id (UUID, nullable) ‚Üí —Å—Å—ã–ª–∫–∞ –Ω–∞ litters
  - name, slug, sex, color, etc.
```

### –°—Ö–µ–º–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```
puppies:
  - id (UUID)
  - litter_id (UUID, nullable) ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –¥–ª—è backward compatibility
  - sire_id (UUID, nullable) ‚Üí –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ parents (male)
  - dam_id (UUID, nullable) ‚Üí –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ parents (female)
  - name, slug, sex, color, etc.
```

---

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### 1. TypeScript —Ç–∏–ø—ã

**–§–∞–π–ª:** `lib/supabase/types.ts`

```typescript
export type Puppy = {
  id: string;
  litter_id: string | null;
  sire_id: string | null;  // ‚Üê –ù–û–í–û–ï
  dam_id: string | null;   // ‚Üê –ù–û–í–û–ï
  name: string | null;
  slug: string | null;
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
};
```

---

### 2. Query —Ñ—É–Ω–∫—Ü–∏–∏

**–§–∞–π–ª:** `lib/admin/puppies/queries.ts`

#### –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

```typescript
export type AdminParent = {
  id: string;
  name: string;
  breed: "french_bulldog" | "english_bulldog" | null;
  photo_urls: string[] | null;
};

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö —Å–∞–º—Ü–æ–≤ (–æ—Ç—Ü–æ–≤)
export async function fetchAdminSires(): Promise<AdminParent[]> {
  const supabase = getAdminSupabaseClient();
  const { data, error } = await supabase
    .from("parents")
    .select("id,name,breed,photo_urls")
    .eq("sex", "male")  // ‚Üê —Ñ–∏–ª—å—Ç—Ä
    .order("name", { ascending: true });

  if (error) throw error;
  return (data ?? []) as AdminParent[];
}

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö —Å–∞–º–æ–∫ (–º–∞—Ç–µ—Ä–µ–π)
export async function fetchAdminDams(): Promise<AdminParent[]> {
  const supabase = getAdminSupabaseClient();
  const { data, error } = await supabase
    .from("parents")
    .select("id,name,breed,photo_urls")
    .eq("sex", "female")  // ‚Üê —Ñ–∏–ª—å—Ç—Ä
    .order("name", { ascending: true });

  if (error) throw error;
  return (data ?? []) as AdminParent[];
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `mapCreatePayload`:

```diff
function mapCreatePayload(input: CreatePuppyPayload) {
  return {
    name: input.name,
    slug: input.slug,
    status: input.status,
    price_usd: input.priceUsd ?? null,
    birth_date: input.birthDate ?? null,
-   litter_id: input.litterId ?? null,
+   sire_id: input.sireId ?? null,   // ‚Üê –ò–ó–ú–ï–ù–ï–ù–û
+   dam_id: input.damId ?? null,     // ‚Üê –ò–ó–ú–ï–ù–ï–ù–û
    sex: input.sex ?? null,
    color: input.color ?? null,
    weight_oz: input.weightOz ?? null,
    description: input.description ?? null,
  };
}
```

---

### 3. Validation —Å—Ö–µ–º–∞

**–§–∞–π–ª:** `lib/admin/puppies/schema.ts`

```diff
- const litterIdSchema = z.preprocess(...)
-   .string().uuid("Invalid litter identifier").optional();

+ const parentIdSchema = z.preprocess(...)
+   .string().uuid("Invalid parent identifier").optional();

export const createPuppySchema = z.object({
  name: nameSchema,
  status: adminPuppyStatusSchema.default("available"),
  priceUsd: priceUsdSchema,
  birthDate: birthDateSchema,
  slug: slugSchema.optional(),
- litterId: litterIdSchema,
+ sireId: parentIdSchema,  // ‚Üê –ù–û–í–û–ï
+ damId: parentIdSchema,   // ‚Üê –ù–û–í–û–ï
  sex: sexSchema,
  color: colorSchema,
  weightOz: weightOzSchema,
  description: descriptionSchema,
});
```

---

### 4. Admin —Å—Ç—Ä–∞–Ω–∏—Ü–∞

**–§–∞–π–ª:** `app/admin/(dashboard)/puppies/page.tsx`

```diff
export default async function AdminPuppiesPage() {
  const puppies = await fetchAdminPuppies();
- const litters = await fetchAdminLittersWithParents();
+ const sires = await fetchAdminSires();
+ const dams = await fetchAdminDams();

- const litterOptions = litters.map((litter) => ({
-   value: litter.id,
-   label: `${litter.name} (${litter.sire.name} √ó ${litter.dam.name})`
- }));

+ const sireOptions = sires.map((sire) => ({
+   value: sire.id,
+   label: `${sire.name}${sire.breed ? ` (${sire.breed === "english_bulldog" ? "English" : "French"} Bulldog)` : ""}`
+ }));

+ const damOptions = dams.map((dam) => ({
+   value: dam.id,
+   label: `${dam.name}${dam.breed ? ` (${dam.breed === "english_bulldog" ? "English" : "French"} Bulldog)` : ""}`
+ }));

  return (
    <CreatePuppyPanel
      statusOptions={statusOptions}
-     litterOptions={litterOptions}
+     sireOptions={sireOptions}
+     damOptions={damOptions}
    />
  );
}
```

---

### 5. –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —â–µ–Ω–∫–∞

**–§–∞–π–ª:** `app/admin/(dashboard)/puppies/create-puppy-panel.tsx`

#### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±–Ω–æ–≤–ª—ë–Ω:

```diff
interface CreatePuppyPanelProps {
  statusOptions: StatusOption[];
- litterOptions: LitterOption[];
+ sireOptions: ParentOption[];
+ damOptions: ParentOption[];
}

export function CreatePuppyPanel({
  statusOptions,
- litterOptions
+ sireOptions,
+ damOptions
}: CreatePuppyPanelProps) {
```

#### –°—Ç–∞—Ä—ã–π UI (–æ–¥–∏–Ω dropdown):

```jsx
<div className="space-y-2">
  <label htmlFor="litterId">Litter (optional)</label>
  <select id="litterId" name="litterId">
    <option value="">No litter (private breeding)</option>
    {litterOptions.map((option) => (
      <option key={option.value} value={option.value}>
        {option.label}
      </option>
    ))}
  </select>
</div>
```

#### –ù–æ–≤—ã–π UI (–¥–≤–∞ dropdown):

```jsx
{/* Sire (Father) */}
<div className="space-y-2">
  <label htmlFor="sireId">Sire / Father (optional)</label>
  <select id="sireId" name="sireId" disabled={pending}>
    <option value="">No sire specified</option>
    {sireOptions.map((option) => (
      <option key={option.value} value={option.value}>
        {option.label}
      </option>
    ))}
  </select>
  {fieldError("sireId") ? <p className="text-xs text-red-500">{fieldError("sireId")}</p> : null}
</div>

{/* Dam (Mother) */}
<div className="space-y-2">
  <label htmlFor="damId">Dam / Mother (optional)</label>
  <select id="damId" name="damId" disabled={pending}>
    <option value="">No dam specified</option>
    {damOptions.map((option) => (
      <option key={option.value} value={option.value}>
        {option.label}
      </option>
    ))}
  </select>
  {fieldError("damId") ? <p className="text-xs text-red-500">{fieldError("damId")}</p> : null}
</div>
```

**–ü—Ä–∏–º–µ—Ä dropdown options:**
- Sire: `"Sir Winston (English Bulldog)"`, `"Pierre (French Bulldog)"`
- Dam: `"Lady Clementine (English Bulldog)"`, `"Colette (French Bulldog)"`

---

### 6. Server Action

**–§–∞–π–ª:** `app/admin/(dashboard)/puppies/actions.ts`

```diff
const submission = {
  name: formData.get("name"),
  status: formData.get("status") ?? "available",
  priceUsd: formData.get("priceUsd"),
  birthDate: formData.get("birthDate"),
- litterId: formData.get("litterId"),
  slug: formData.get("slug"),
+ sireId: formData.get("sireId"),
+ damId: formData.get("damId"),
  sex: formData.get("sex"),
  color: formData.get("color"),
  weightOz: formData.get("weightOz"),
  description: formData.get("description"),
};
```

---

### 7. –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–§–∞–π–ª:** `lib/supabase/queries.ts`

#### `getPuppyBySlug` - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä—è–º—ã–º ID:

```typescript
export const getPuppyBySlug = cache(async (slug: string) => {
  const { data, error } = await getSupabaseClient()
    .from("puppies")
    .select("*")
    .eq("slug", slug)
    .maybeSingle();

  if (!data) return null;

  const litters = await getLitters();
  const litter = data.litter_id ? litters.find((l) => l.id === data.litter_id) ?? null : null;
  const parentsList = await getParents();

  // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ø—Ä—è–º—ã–µ sire_id/dam_id ‚Üí litter parents ‚Üí null
  const parents = {
    sire: data.sire_id
      ? parentsList.find((p) => p.id === data.sire_id) ?? null
      : litter?.sire_id
        ? parentsList.find((p) => p.id === litter.sire_id) ?? null
        : null,
    dam: data.dam_id
      ? parentsList.find((p) => p.id === data.dam_id) ?? null
      : litter?.dam_id
        ? parentsList.find((p) => p.id === litter.dam_id) ?? null
        : null,
  };

  return { ...data as Puppy, litter, parents } as PuppyWithRelations;
});
```

**–õ–æ–≥–∏–∫–∞:**
1. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º `puppy.sire_id` –∏ `puppy.dam_id` (–Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥)
2. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º `litter.sire_id` –∏ `litter.dam_id` (—Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥)
3. –ï—Å–ª–∏ –∏ —Ç–∞–º –ø—É—Å—Ç–æ ‚Üí `null` (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "TBD")

#### `getPuppiesWithRelations` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ:

```typescript
const sire = puppy.sire_id
  ? parentById.get(puppy.sire_id) ?? null
  : litter?.sire_id
    ? parentById.get(litter.sire_id) ?? null
    : null;

const dam = puppy.dam_id
  ? parentById.get(puppy.dam_id) ?? null
  : litter?.dam_id
    ? parentById.get(litter.dam_id) ?? null
    : null;
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã:

**–§–∞–π–ª:** `app/puppies/page.test.tsx`

```diff
const mockPuppies = [
  {
    id: 'puppy-1',
    litter_id: null,
+   sire_id: null,
+   dam_id: null,
    name: 'Buddy',
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  }
];
```

**–§–∞–π–ª:** `lib/supabase/queries.test.ts`

```diff
const basePuppy: Omit<PuppyWithRelations, "parents" | "litter"> = {
  id: "id-1",
  litter_id: "litter-1",
+ sire_id: null,
+ dam_id: null,
  name: "Duke",
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
};
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è:

```bash
‚úÖ npm run typecheck    # TypeScript compilation passed
‚úÖ npm run lint         # ESLint validation passed (max-warnings=0)
‚úÖ npm run build        # Production build succeeded
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ.

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. –£–ø—Ä–æ—â–µ–Ω–∏–µ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

**–†–∞–Ω—å—à–µ:**
1. –°–æ–∑–¥–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π (sire, dam)
2. –°–æ–∑–¥–∞—Ç—å litter –∏ —É–∫–∞–∑–∞—Ç—å sire_id, dam_id
3. –°–æ–∑–¥–∞—Ç—å —â–µ–Ω–∫–∞ –∏ —É–∫–∞–∑–∞—Ç—å litter_id

**–¢–µ–ø–µ—Ä—å:**
1. –°–æ–∑–¥–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç)
2. –°–æ–∑–¥–∞—Ç—å —â–µ–Ω–∫–∞ –∏ –≤—ã–±—Ä–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏–∑ dropdown

**–≠–∫–æ–Ω–æ–º–∏—è:** 1 —à–∞–≥ —É–±—Ä–∞–Ω, –º–µ–Ω—å—à–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è UUID.

---

### 2. –ì–∏–±–∫–æ—Å—Ç—å

- –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —â–µ–Ω–∫–∞ **–±–µ–∑ —Ä–æ–¥–∏—Ç–µ–ª–µ–π** (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "Sire: TBD", "Dam: TBD")
- –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å **—Ç–æ–ª—å–∫–æ –æ—Ç—Ü–∞** –∏–ª–∏ **—Ç–æ–ª—å–∫–æ –º–∞—Ç—å**
- –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å **–æ–±–æ–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π**
- –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å litter –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–º—ë—Ç–∞

---

### 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ Phase 2: –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª–µ–π

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–∂–µ –≥–æ—Ç–æ–≤–∞:**

```typescript
export type Parent = {
  id: string;
  name: string;
  photo_urls: string[] | null;  // ‚Üê –£–∂–µ –µ—Å—Ç—å!
  video_urls: string[] | null;  // ‚Üê –£–∂–µ –µ—Å—Ç—å!
  // ...
};
```

**–ë—É–¥—É—â–∏–µ —à–∞–≥–∏ (Phase 2):**
1. –î–æ–±–∞–≤–∏—Ç—å UI –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (Supabase Storage)
2. –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª–µ–π –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ —â–µ–Ω–∫–∞ (–º–∞–ª–µ–Ω—å–∫–∏–µ thumbnails —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–∞–º–∏)
3. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–æ–¥–∏—Ç–µ–ª—è —Å –ø–æ–ª–Ω–æ–π –≥–∞–ª–µ—Ä–µ–µ–π

**–ü—Ä–∏–º–µ—Ä:** –ù–∞ –∫–∞—Ä—Ç–æ—á–∫–µ Regal —Ä—è–¥–æ–º —Å "Sire: Sir Winston" –ø–æ—è–≤–∏—Ç—Å—è –º–∏–Ω–∏–∞—Ç—é—Ä–∞ —Ñ–æ—Ç–æ Sir Winston.

---

### 4. –õ—É—á—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**–°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
Puppy --litter_id--> Litter --sire_id--> Parent (Sire)
                           --dam_id--> Parent (Dam)
```
**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ (litter) –Ω—É–∂–Ω–∞ –≤—Å–µ–≥–¥–∞
- –ù–µ–ª—å–∑—è —É–∫–∞–∑–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π –±–µ–∑ litter

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
Puppy --sire_id--> Parent (Sire)
      --dam_id--> Parent (Dam)
```
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä—è–º–∞—è —Å–≤—è–∑—å
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π litter (–¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)
- –ü—Ä–æ—â–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è

---

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ì–∞—Ä–∞–Ω—Ç–∏–∏:

1. ‚úÖ **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —â–µ–Ω–∫–∏ —Å `litter_id` –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å**
   - –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–Ω–∞—á–∞–ª–∞ `sire_id/dam_id`, –ø–æ—Ç–æ–º fallback –Ω–∞ `litter.sire_id/dam_id`

2. ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
   - –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —â–µ–Ω–∫–∏ —Å litter —Ç–µ–ø–µ—Ä—å —Ç–∞–∫–∂–µ –∏–º–µ—é—Ç `sire_id` –∏ `dam_id`
   - SQL UPDATE —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –¥–∞–Ω–Ω—ã–µ –∏–∑ litters –≤ puppies

3. ‚úÖ **–ü–æ–ª–µ `litter_id` —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ**
   - –ù–µ —É–¥–∞–ª–µ–Ω–æ –∏–∑ –±–∞–∑—ã
   - –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —â–µ–Ω–∫–æ–≤ –ø–æ –ø–æ–º—ë—Ç—É
   - –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Å—ë –µ—â—ë –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç `"Litter: Royal Heritage Litter"`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

**–©–µ–Ω–æ–∫ "Regal" (—Å–æ–∑–¥–∞–Ω —Å–æ —Å—Ç–∞—Ä—ã–º –ø–æ–¥—Ö–æ–¥–æ–º):**
- –î–æ –º–∏–≥—Ä–∞—Ü–∏–∏: `litter_id = "aaaaa..."`, `sire_id = null`, `dam_id = null`
- –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏: `litter_id = "aaaaa..."`, `sire_id = "11111..."` (Sir Winston), `dam_id = "22222..."` (Lady Clementine)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Sire: Sir Winston", "Dam: Lady Clementine" ‚úÖ

**–©–µ–Ω–æ–∫ "Plusha" (—Å–æ–∑–¥–∞–Ω –±–µ–∑ litter):**
- –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π: `litter_id = null`, –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ "Sire: TBD", "Dam: TBD"
- –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π: –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–µ dropdown
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –ì–∏–±–∫–æ—Å—Ç—å –ø–æ–≤—ã—Å–∏–ª–∞—Å—å ‚úÖ

---

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### Phase 2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏

#### 1. –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª–µ–π

**–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/parents` —Å CRUD –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ Supabase Storage
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è `photo_urls[]` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è

**–ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
```jsx
<div className="flex items-center gap-2">
  {puppy.parents?.sire?.photo_urls?.[0] && (
    <img
      src={puppy.parents.sire.photo_urls[0]}
      alt={puppy.parents.sire.name}
      className="w-10 h-10 rounded-full object-cover"
    />
  )}
  <span>Sire: {sireName ?? "TBD"}</span>
</div>
```

**–ü—Ä–∏–º–µ—Ä:** –ö–∞—Ä—Ç–æ—á–∫–∞ Regal –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –ú–∞–ª–µ–Ω—å–∫–æ–µ —Ñ–æ—Ç–æ Sir Winston —Ä—è–¥–æ–º —Å "Sire: Sir Winston"
- –ú–∞–ª–µ–Ω—å–∫–æ–µ —Ñ–æ—Ç–æ Lady Clementine —Ä—è–¥–æ–º —Å "Dam: Lady Clementine"

---

#### 2. –°—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–æ–¥–∏—Ç–µ–ª–µ–π

**URL:** `/parents/[slug]`

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –§–æ—Ç–æ–≥–∞–ª–µ—Ä–µ—è —Ä–æ–¥–∏—Ç–µ–ª—è
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Ä–æ–¥–µ
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–µ—Ç–µ–π (—â–µ–Ω–∫–∏ –æ—Ç —ç—Ç–æ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è)
- Health clearances (—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)
- –í–µ—Å, –æ–∫—Ä–∞—Å, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä:** `/parents/sir-winston` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –§–æ—Ç–æ Sir Winston
- "English Bulldog"
- "Health Clearances: OFA Hips Excellent, CERF Clear"
- "Children: Regal, Duke, Pearl" (—Å —Å—Å—ã–ª–∫–∞–º–∏)

---

#### 3. Inline –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª–µ–π

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- Dropdown –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ **—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö** —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏–∑ –±–∞–∑—ã
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è –Ω–µ—Ç ‚Üí –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—É—é –∞–¥–º–∏–Ω–∫—É

**–£–ª—É—á—à–µ–Ω–∏–µ:**
```jsx
<select id="sireId" name="sireId">
  <option value="">No sire specified</option>
  {sireOptions.map(...)}
  <option value="__new__">+ Add new sire...</option>
</select>

{showNewSireForm && (
  <input
    type="text"
    placeholder="Enter sire name"
    onBlur={(e) => createParent({ name: e.target.value, sex: 'male' })}
  />
)}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—è "–Ω–∞ –ª–µ—Ç—É" –ø—Ä—è–º–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —â–µ–Ω–∫–∞.

---

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —â–µ–Ω–∫–∞ —Å —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏:

1. **–û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:** `/admin/puppies`
2. **–ù–∞–∂–∞—Ç—å "Add puppy"**
3. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è:**
   - Name: `"Buddy"`
   - Slug: `"buddy"` (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
   - Status: `"Available"`
   - Price: `$4200`
   - Birth Date: `2024-11-08`
   - Sex: `"Male"`
   - Color: `"Fawn"`
   - Weight: `38 oz`

4. **–í—ã–±—Ä–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π:**
   - **Sire / Father:** `"Sir Winston (English Bulldog)"` ‚Üê dropdown
   - **Dam / Mother:** `"Lady Clementine (English Bulldog)"` ‚Üê dropdown

5. **–î–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ (optional):**
   ```
   Calm demeanor, excels with children, AKC paperwork included.
   ```

6. **–ù–∞–∂–∞—Ç—å "Create puppy"**

7. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –©–µ–Ω–æ–∫ —Å–æ–∑–¥–∞–Ω –≤ –±–∞–∑–µ —Å `sire_id` –∏ `dam_id`
   - –ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/puppies/buddy` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
     - "Sire: Sir Winston"
     - "Dam: Lady Clementine"
     - "Litter: Private" (–µ—Å–ª–∏ litter –Ω–µ —É–∫–∞–∑–∞–Ω)

---

### –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —â–µ–Ω–∫–∞ –ë–ï–ó —Ä–æ–¥–∏—Ç–µ–ª–µ–π:

1. –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —à–∞–≥–∏ 4 (–æ—Å—Ç–∞–≤–∏—Ç—å dropdown –Ω–∞ "No sire specified" –∏ "No dam specified")
2. –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Sire: TBD", "Dam: TBD"

---

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª—è–º (Phase 2):

**–ü–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ.** –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∞–∑–µ:

1. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `/admin/parents`
2. –ù–∞–π—Ç–∏ —Ä–æ–¥–∏—Ç–µ–ª—è: "Sir Winston"
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ Supabase Storage
4. –û–±–Ω–æ–≤–∏—Ç—å `photo_urls[]` –≤ —Ç–∞–±–ª–∏—Ü–µ `parents`
5. –§–æ—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —â–µ–Ω–∫–æ–≤, –≥–¥–µ Sir Winston ‚Äî –æ—Ç–µ—Ü

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `sire_id` –∏ `dam_id` –≤ —Ç–∞–±–ª–∏—Ü—É `puppies`
‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã TypeScript —Ç–∏–ø—ã** - —Ç–∏–ø `Puppy` —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç –Ω–æ–≤—ã–µ –ø–æ–ª—è
‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã query —Ñ—É–Ω–∫—Ü–∏–∏** - `fetchAdminSires()` –∏ `fetchAdminDams()` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø–æ–ª—É
‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è** - schema —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `sireId` –∏ `damId`
‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** - –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö dropdown –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ
‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã server actions** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä—è–º—ã–º ID, fallback –Ω–∞ litter
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã, litter —Å–æ—Ö—Ä–∞–Ω—ë–Ω
‚úÖ **–¢–µ—Å—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã** - –≤—Å–µ –º–æ–∫–∏ –≤–∫–ª—é—á–∞—é—Ç –Ω–æ–≤—ã–µ –ø–æ–ª—è
‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–π–¥–µ–Ω–∞** - TypeScript, ESLint, Production Build —É—Å–ø–µ—à–Ω—ã

### –ß—Ç–æ –ù–ï —Å–¥–µ–ª–∞–Ω–æ (Phase 2):

‚è≥ **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª–µ–π** - UI –¥–ª—è Supabase Storage
‚è≥ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ç–æ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö** - thumbnails —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–∞–º–∏
‚è≥ **–°—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–æ–¥–∏—Ç–µ–ª–µ–π** - `/parents/[slug]` —Å –≥–∞–ª–µ—Ä–µ–µ–π –∏ –¥–µ—Ç—å–º–∏
‚è≥ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏** - CRUD –∞–¥–º–∏–Ω–∫–∞ –¥–ª—è parents
‚è≥ **Inline —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª–µ–π** - "Add new sire..." –≤ dropdown

### –°—Ç–∞—Ç—É—Å:

**üü¢ PRODUCTION READY**

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è backward-compatible. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ñ–æ—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–∞ (`photo_urls` field exists).

### –ö–æ–º–º–∏—Ç:

```
feat(admin): replace litter dropdown with direct parent selection

Commit: 1787362
Date: 2025-11-08
Files Changed: 10
Lines Added: 154
Lines Removed: 31
```

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ production!** üöÄ
